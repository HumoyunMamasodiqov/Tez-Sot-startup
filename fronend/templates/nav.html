<!DOCTYPE html>
<html lang="uz">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TezSot - O'zbekistonning Eng Yirik Online Marketi</title>
    <link rel="icon" type="image/png" href="{% static 'img/iconlogo.png' %}">
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- SEO va Accessibility qo'shimchalari -->
    <meta name="description" content="TezSot - O'zbekistondagi eng yirik online savdo platformasi. Yangi va ishlatilgan mahsulotlarni arzon narxlarda toping.">
    <meta name="keywords" content="sotib olish, sotish, online do'kon, O'zbekiston, mahsulotlar">
    <meta name="author" content="TezSot">
    
    <!-- Open Graph meta teglar -->
    <meta property="og:title" content="TezSot - Online Market">
    <meta property="og:description" content="O'zbekistondagi eng yirik online savdo platformasi">
    <meta property="og:image" content="{% static 'img/logo.png' %}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    
    <!-- Schema.org markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "TezSot",
      "url": "https://tezsot.uz/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://tezsot.uz/barcha-mahsulotlar/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#eff6ff",
                100: "#dbeafe",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
              },
              secondary: {
                50: "#ecfdf5",
                100: "#d1fae5",
                500: "#10b981",
                600: "#059669",
              },
              accent: {
                500: "#f59e0b",
                600: "#d97706",
              },
              gray: {
                50: "#f9fafb",
                100: "#f3f4f6",
                200: "#e5e7eb",
                300: "#d1d5db",
                400: "#9ca3af",
                500: "#6b7280",
                600: "#4b5563",
                700: "#374151",
                800: "#1f2937",
                900: "#111827",
              },
            },
            fontFamily: {
              pacifico: ["Pacifico", "cursive"],
              inter: ["Inter", "system-ui", "sans-serif"],
            },
            boxShadow: {
              soft: "0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)",
              medium: "0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",
              large: "0 10px 40px -10px rgba(0, 0, 0, 0.15)",
              xl: "0 20px 50px -12px rgba(0, 0, 0, 0.25)",
            },
            animation: {
              "fade-in": "fadeIn 0.5s ease-in-out",
              "slide-up": "slideUp 0.3s ease-out",
              "bounce-soft": "bounceSoft 2s infinite",
              "slide-down": "slideDown 0.3s ease-out",
              "pulse-soft": "pulseSoft 2s infinite",
              "slide-in-right": "slideInRight 0.3s ease-out",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0" },
                "100%": { opacity: "1" },
              },
              slideUp: {
                "0%": { transform: "translateY(10px)", opacity: "0" },
                "100%": { transform: "translateY(0)", opacity: "1" },
              },
              slideDown: {
                "0%": { transform: "translateY(-10px)", opacity: "0" },
                "100%": { transform: "translateY(0)", opacity: "1" },
              },
              bounceSoft: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-5px)" },
              },
              pulseSoft: {
                "0%, 100%": { opacity: "1" },
                "50%": { opacity: "0.8" },
              },
              slideInRight: {
                "0%": { transform: "translateX(20px)", opacity: "0" },
                "100%": { transform: "translateX(0)", opacity: "1" },
              },
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <style>
      /* Asosiy stillar */
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      
      .gradient-primary {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      }
      
      .gradient-accent {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      }

      .card-hover {
        transition: all 0.3s ease;
      }

      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .nav-link {
        position: relative;
      }

      .nav-link::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 0;
        height: 2px;
        background: #3b82f6;
        transition: width 0.3s ease;
      }

      .nav-link:hover::after,
      .nav-link.active::after {
        width: 100%;
      }

      /* Header va navigatsiya stillari */
      .header-container {
        background: white;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        position: sticky;
        top: 0;
        z-index: 1000;
        border-bottom: 1px solid #f1f5f9;
        padding: ;
      }

      .logo-container {
        transition: transform 0.3s ease;
      }

      .logo-container:hover {
        transform: scale(1.05);
      }

      .nav-item {
        position: relative;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .nav-item:hover {
        background-color: #f8fafc;
        color: #3b82f6;
      }

      .nav-item.active {
        color: #3b82f6;
        background-color: #eff6ff;
      }

      .action-button {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.25rem;
        border-radius: 10px;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }

      .action-button.primary {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        color: white;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .action-button.primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
      }

      .action-button.accent {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
      }

      .action-button.accent:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
      }

      .action-button.secondary {
        background: #f8fafc;
        color: #374151;
        border: 1px solid #e5e7eb;
      }

      .action-button.secondary:hover {
        background: #f1f5f9;
        border-color: #d1d5db;
      }

      /* Qidiruv tizimi stillari */
      .search-container {
        position: relative;
        width: 100%;
        max-width: 500px;
      }

      .search-input {
        width: 100%;
        padding: 0.875rem 3.5rem 0.875rem 1.25rem;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        background: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .search-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 4px 20px rgba(59, 130, 246, 0.1);
      }

      .search-icon {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #6b7280;
        transition: color 0.3s ease;
        cursor: pointer;
      }

      .search-input:focus + .search-icon {
        color: #3b82f6;
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        max-height: 400px;
        overflow-y: auto;
        z-index: 1000;
        margin-top: 0.5rem;
        display: none;
        border: 1px solid #e5e7eb;
        animation: slideDown 0.3s ease-out;
      }

      .search-results.active {
        display: block;
      }

      .search-result-item {
        width: 98%;
        height: auto;
        padding: 1rem;
        border-bottom: 1px solid #f3f4f6;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .search-result-item:hover {
        background: #f8fafc;
        transform: translateX(5px);
      }

      .search-result-item:last-child {
        border-bottom: none;
      }

      .search-result-image {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        overflow: hidden;
        flex-shrink: 0;
        background: #f3f4f6;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .search-result-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .search-result-content {
        flex: 1;
        min-width: 0;
      }

      .search-result-name {
        font-weight: 600;
        margin-bottom: 0.25rem;
        color: #1f2937;
        font-size: 0.95rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .search-result-price {
        color: #3b82f6;
        font-weight: 700;
        font-size: 0.95rem;
        margin-bottom: 0.25rem;
      }

      .search-result-category {
        color: #6b7280;
        font-size: 0.8rem;
        background: #f3f4f6;
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        display: inline-block;
      }

      .search-result-location {
        color: #9ca3af;
        font-size: 0.8rem;
        margin-top: 0.25rem;
      }

      /* Mobile navigatsiya */
      .mobile-nav-container {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        border-top: 1px solid #e5e7eb;
        z-index: 999;
        padding: 0.5rem 0;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
      }

      .mobile-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0.5rem;
        border-radius: 10px;
        transition: all 0.2s ease;
        color: #6b7280;
        position: relative;
      }

      .mobile-nav-item.active {
        color: #3b82f6;
      }

      .mobile-nav-item:hover {
        background: #f8fafc;
      }

      .mobile-nav-icon {
        font-size: 1.25rem;
        margin-bottom: 0.25rem;
      }

      .mobile-nav-label {
        font-size: 0.75rem;
        font-weight: 500;
      }

      .mobile-nav-badge {
        position: absolute;
        top: 0;
        right: 0.25rem;
        background: #ef4444;
        color: white;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: 600;
      }

      /* Mobile menyu */
      .mobile-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1001;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .mobile-menu-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .mobile-menu-panel {
        position: fixed;
        top: 0;
        left: 0;
        width: 85%;
        max-width: 320px;
        height: 100%;
        background: white;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 1002;
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
      }

      .mobile-menu-panel.active {
        transform: translateX(0);
      }

      .mobile-menu-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.25rem;
        border-bottom: 1px solid #e5e7eb;
      }

      .mobile-menu-logo {
        height: 32px;
      }

      .mobile-menu-close {
        padding: 0.5rem;
        border-radius: 8px;
        color: #6b7280;
        transition: all 0.2s ease;
      }

      .mobile-menu-close:hover {
        background: #f3f4f6;
        color: #374151;
      }

      .mobile-menu-content {
        padding: 1.25rem;
      }

      .mobile-menu-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.875rem 1rem;
        border-radius: 10px;
        transition: all 0.2s ease;
        color: #374151;
        margin-bottom: 0.5rem;
      }

      .mobile-menu-item:hover,
      .mobile-menu-item.active {
        background: #eff6ff;
        color: #3b82f6;
      }

      .mobile-menu-icon {
        font-size: 1.25rem;
        width: 24px;
        text-align: center;
      }

      .mobile-menu-label {
        font-weight: 500;
      }

      .mobile-menu-badge {
        margin-left: auto;
        background: #3b82f6;
        color: white;
        border-radius: 12px;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        font-weight: 600;
      }

      /* Yuklash animatsiyasi */
      .loading-spinner {
        display: none;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        padding: 1.5rem;
        color: #3b82f6;
      }

      .loading-spinner.active {
        display: flex;
      }

      .loading-dots {
        display: inline-flex;
        gap: 4px;
      }

      .loading-dots div {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #3b82f6;
        animation: bounce 1.4s infinite ease-in-out both;
      }

      .loading-dots div:nth-child(1) { animation-delay: -0.32s; }
      .loading-dots div:nth-child(2) { animation-delay: -0.16s; }

      @keyframes bounce {
        0%, 80%, 100% { 
          transform: scale(0);
        } 40% { 
          transform: scale(1.0);
        }
      }

      /* Hero section */
      .hero-section {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        position: relative;
        overflow: hidden;
      }

      .hero-pattern {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      }

      /* Category cards */
      .category-card {
        transition: all 0.3s ease;
        border-radius: 16px;
        overflow: hidden;
        position: relative;
      }

      .category-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      .category-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        padding: 1.5rem;
        color: white;
      }

      /* Product cards */
      .product-card {
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s ease;
        background: white;
        position: relative;
      }

      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .product-image {
        height: 200px;
        overflow: hidden;
        position: relative;
      }

      .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .product-card:hover .product-image img {
        transform: scale(1.05);
      }

      .product-badge {
        position: absolute;
        top: 12px;
        left: 12px;
        background: #ef4444;
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .product-favorite {
        position: absolute;
        top: 12px;
        right: 12px;
        background: rgba(255, 255, 255, 0.9);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .product-favorite:hover {
        background: white;
        transform: scale(1.1);
      }

      .product-favorite.active {
        background: #ef4444;
        color: white;
      }

      /* Stats section */
      .stats-card {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
      }

      .stats-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      }

      .stats-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        font-size: 1.5rem;
      }

      /* Footer */
      .footer {
        background: #1f2937;
        color: white;
      }

      .footer-links a {
        transition: color 0.2s ease;
      }

      .footer-links a:hover {
        color: #3b82f6;
      }

      /* Responsive dizayn */
      @media (max-width: 1024px) {
        .desktop-nav {
          display: none;
        }
        
        .mobile-nav-container {
          display: flex;
        }
      }

      @media (min-width: 1025px) {
        .mobile-nav-container {
          display: none;
        }
        
        .mobile-menu-btn {
          display: none;
        }
      }

      @media (max-width: 640px) {
        .logo-a {
          display: none;
        }
        .action-button {
          display: none;
        }
        .search-container {
          max-width: 100%;
        }
        
        .action-button span {
          display: none;
        }
        
        .action-button {
          padding: 0.75rem;
        }
        
        .hero-title {
          font-size: 2rem;
        }
        .ba {
          display: none;
        }
      }

      /* Print stillari */
      @media print {
        .no-print {
          display: none !important;
        }
      }
      .mobile-nav-container  {
        display: flex;
        justify-content: space-between;
      }
    </style>
  </head>
  <body class="">
    <!-- Desktop Header -->
    <header class="header-container no-print">
      <div class="max-w-[1440px] mx-auto px-4">
        <div class="flex items-center justify-between h-16">
          <!-- Logo -->
          <a href="/" class="logo-container">
            <div class="flex items-center space-x-3">
              <img
                class="h-8 logo-a"
                src="{% static 'img/logo.png' %}"
                alt="TezSot - O'zbekistonning eng yirik online marketi"
              />
            </div>
          </a>

          <!-- Desktop Navigation -->
          <nav class="desktop-nav flex items-center space-x-6">
            <a
              href="/"
              class="nav-item {% if request.path == '/' %}active{% endif %}"
            >
              Bosh sahifa
            </a>
            <a
              href="{% url 'barcha_mahsulotlar' %}"
              class="nav-item {% if 'barcha-mahsulotlar' in request.path %}active{% endif %}"
            >
              Barcha mahsulotlar
            </a>
            <a
              href="{% url 'biz_haqimizda' %}"
              class="nav-item {% if 'biz-haqimizda' in request.path %}active{% endif %}"
            >
              Biz haqimizda
            </a>
            
          </nav>

          <!-- Qidiruv bo'limi -->
          <div class="search-container">
            <input 
              type="text" 
              id="desktopSearch" 
              class="search-input" 
              placeholder="Mahsulot, kategoriya yoki brend qidirish..."
              autocomplete="off"
              aria-label="Mahsulot qidirish"
            >
            <div class="search-icon" id="desktopSearchIcon">
              <i class="fas fa-search"></i>
            </div>
            
            <div class="search-results" id="desktopSearchResults">
              <div class="loading-spinner" id="desktopLoadingSpinner">
                <div class="loading-dots">
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
                <span>Qidirilmoqda...</span>
              </div>
              <div id="desktopResultsContainer"></div>
            </div>
          </div>

          <!-- Foydalanuvchi amallari -->
          <div class="flex items-center space-x-3">
            {% if user.is_authenticated %}
              <div class="relative group">
                <button class="action-button secondary">
                  <i class="ri-user-line"></i>
                  <span>Profil</span>
                </button>
                <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-large border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
                  <a href="{% url 'mening_elonlarim' %}" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg">
                    Mening e'lonlarim
                  </a>
                  <a href="{% url 'sevimlilarim' %}" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50">
                    Sevimlilar
                    {% if request.user.sevimli_set.count > 0 %}
                      <span class="ml-2 bg-primary-500 text-white text-xs px-2 py-1 rounded-full">
                        {{ request.user.sevimli_set.count }}
                      </span>
                    {% endif %}
                  </a>
                  <div class="border-t border-gray-100">
                    <a href="{% url 'chiqish' %}" class="block px-4 py-3 text-sm text-red-600 hover:bg-red-50 rounded-b-lg">
                      Chiqish
                    </a>
                  </div>
                </div>
              </div>
            {% else %}
              <a href="{% url 'kirish' %}">
                <button class="action-button secondary">
                  <i class="ri-user-line"></i>
                  <span>Kirish</span>
                </button>
              </a>
            {% endif %}
            
            <a href="{% url 'elon_qoshish' %}">
              <button class="action-button primary">
                <i class="ri-add-line"></i>
                <span>E'lon qo'shish</span>
              </button>
            </a>

            <!-- Mobile menyu tugmasi -->
            <button class="ba mobile-menu-btn p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors duration-200">
              <i class="ri-menu-line text-xl"></i>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Mobile Navigation -->
    <div class="mobile-nav-container no-print flex justify-between items-center bg-white shadow-md fixed bottom-0 w-full z-50">
      <div class="flex items-center justify-between w-full px-4 py-2">
    
        <!-- Bosh -->
        <a href="/" class="mobile-nav-item flex flex-col items-center justify-center {% if request.path == '/' %}text-blue-500{% else %}text-gray-600{% endif %}">
          <i class="ri-home-line mobile-nav-icon text-2xl"></i>
          <span class="mobile-nav-label text-xs mt-1">Bosh</span>
        </a>
    
        <!-- Qidirish -->
        <button id="mobileSearchBtn" class="mobile-nav-item flex flex-col items-center justify-center text-gray-600">
          <i class="ri-search-line mobile-nav-icon text-2xl"></i>
          <span class="mobile-nav-label text-xs mt-1">Qidirish</span>
        </button>
    
        <!-- Qoâ€˜shish -->
        {% if user.is_authenticated %}
          <a href="{% url 'elon_qoshish' %}" class="mobile-nav-item flex flex-col items-center justify-center text-gray-600">
            <i class="ri-add-circle-line mobile-nav-icon text-2xl"></i>
            <span class="mobile-nav-label text-xs mt-1">Qo'shish</span>
          </a>
        {% else %}
          <a href="{% url 'kirish' %}" class="mobile-nav-item flex flex-col items-center justify-center text-gray-600">
            <i class="ri-add-circle-line mobile-nav-icon text-2xl"></i>
            <span class="mobile-nav-label text-xs mt-1">Qo'shish</span>
          </a>
        {% endif %}
    
        <!-- Sevimli -->
        {% if user.is_authenticated %}
          <a href="{% url 'sevimlilarim' %}" class="mobile-nav-item relative flex flex-col items-center justify-center {% if 'sevimlilar' in request.path %}text-blue-500{% else %}text-gray-600{% endif %}">
            <i class="ri-heart-line mobile-nav-icon text-2xl"></i>
            <span class="mobile-nav-label text-xs mt-1">Sevimli</span>
            {% if request.user.sevimli_set.count > 0 %}
              <span class="mobile-nav-badge absolute top-0 right-0 bg-red-500 text-white text-[10px] rounded-full px-1">{{ request.user.sevimli_set.count }}</span>
            {% endif %}
          </a>
        {% else %}
          <a href="{% url 'kirish' %}" class="mobile-nav-item flex flex-col items-center justify-center text-gray-600">
            <i class="ri-heart-line mobile-nav-icon text-2xl"></i>
            <span class="mobile-nav-label text-xs mt-1">Sevimli</span>
          </a>
        {% endif %}
    
        <!-- Menyu / Profil -->
          <button class="mobile-nav-item flex flex-col items-center justify-center text-gray-600 mobile-menu-btn">
            <i class="ri-menu-line mobile-nav-icon text-2xl"></i>
            <span class="mobile-nav-label text-xs mt-1">Menyu</span>
          </button>
       
    
      </div>
    </div>
    
    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay no-print" id="mobileMenuOverlay">
      <div class="mobile-menu-panel" id="mobileMenuPanel">
        <div class="mobile-menu-header">
          <div class="flex items-center space-x-3">
            <img
              src="{% static 'img/logo.png' %}"
              alt="TezSot"
              class="mobile-menu-logo"
            />
            
          </div>
          <button class="mobile-menu-close" id="mobileMenuClose">
            <i class="ri-close-line text-xl"></i>
          </button>
        </div>
        
        <div class="mobile-menu-content">
          {% if user.is_authenticated %}
            <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-lg mb-4">
              <div class="w-10 h-10 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center">
                <i class="ri-user-line"></i>
              </div>
              <div>
                <div class="font-medium text-gray-900">{{ user.username }}</div>
                <div class="text-sm text-gray-500">{{ user.email }}</div>
              </div>
            </div>
          {% endif %}
          
          <a href="/" class="mobile-menu-item {% if request.path == '/' %}active{% endif %}">
            <i class="ri-home-line mobile-menu-icon"></i>
            <span class="mobile-menu-label">Bosh sahifa</span>
          </a>
          
          <a href="{% url 'barcha_mahsulotlar' %}" class="mobile-menu-item {% if 'barcha-mahsulotlar' in request.path %}active{% endif %}">
            <i class="ri-store-line mobile-menu-icon"></i>
            <span class="mobile-menu-label">Barcha mahsulotlar</span>
          </a>
          
          {% if user.is_authenticated %}
            <a href="{% url 'mening_elonlarim' %}" class="mobile-menu-item {% if 'mening-elonlarim' in request.path %}active{% endif %}">
              <i class="ri-list-check mobile-menu-icon"></i>
              <span class="mobile-menu-label">Mening e'lonlarim</span>
            </a>
            
            <a href="{% url 'sevimlilarim' %}" class="mobile-menu-item {% if 'sevimlilar' in request.path %}active{% endif %}">
              <i class="ri-heart-line mobile-menu-icon"></i>
              <span class="mobile-menu-label">Sevimlilar</span>
              {% if request.user.sevimli_set.count > 0 %}
                <span class="mobile-menu-badge">{{ request.user.sevimli_set.count }}</span>
              {% endif %}
            </a>
          {% endif %}
          
          <a href="{% url 'biz_haqimizda' %}" class="mobile-menu-item {% if 'biz-haqimizda' in request.path %}active{% endif %}">
            <i class="ri-information-line mobile-menu-icon"></i>
            <span class="mobile-menu-label">Biz haqimizda</span>
          </a>
          
          
          
          {% if user.is_authenticated %}
            <div class="border-t border-gray-200 mt-4 pt-4">
            
              
              <a href="{% url 'chiqish' %}" class="mobile-menu-item text-red-600">
                <i class="ri-logout-box-r-line mobile-menu-icon"></i>
                <span class="mobile-menu-label">Chiqish</span>
              </a>
            </div>
          {% else %}
            <div class="border-t border-gray-200 mt-4 pt-4">
              <a href="{% url 'kirish' %}" class="mobile-menu-item">
                <i class="ri-login-box-line mobile-menu-icon"></i>
                <span class="mobile-menu-label">Kirish</span>
              </a>
              
             
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Asosiy kontent -->
 
   

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Mobile menyu boshqaruvi
        const mobileMenuBtn = document.querySelectorAll('.mobile-menu-btn');
        const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
        const mobileMenuPanel = document.getElementById('mobileMenuPanel');
        const mobileMenuClose = document.getElementById('mobileMenuClose');
        
        function openMobileMenu() {
          mobileMenuOverlay.classList.add('active');
          mobileMenuPanel.classList.add('active');
          document.body.style.overflow = 'hidden';
        }
        
        function closeMobileMenu() {
          mobileMenuOverlay.classList.remove('active');
          mobileMenuPanel.classList.remove('active');
          document.body.style.overflow = '';
        }
        
        mobileMenuBtn.forEach(btn => {
          btn.addEventListener('click', openMobileMenu);
        });
        
        mobileMenuClose.addEventListener('click', closeMobileMenu);
        mobileMenuOverlay.addEventListener('click', closeMobileMenu);
        
        // Qidiruv tizimi
        const desktopSearch = document.getElementById('desktopSearch');
        const desktopSearchResults = document.getElementById('desktopSearchResults');
        const desktopResultsContainer = document.getElementById('desktopResultsContainer');
        const desktopLoadingSpinner = document.getElementById('desktopLoadingSpinner');
        
        let searchTimeout;
        
        // Qidiruv funksiyasi
        function performSearch(query, resultsContainer, loadingSpinner, searchResults) {
          clearTimeout(searchTimeout);
          
          if (query.length === 0) {
            searchResults.classList.remove('active');
            return;
          }
          
          if (query.length < 2) {
            resultsContainer.innerHTML = `
              <div class="p-4 text-center text-gray-500">
                Iltimos, kamida 2 ta belgi kiriting
              </div>
            `;
            searchResults.classList.add('active');
            return;
          }
          
          loadingSpinner.classList.add('active');
          searchResults.classList.add('active');
          
          // Oldingi natijalarni tozalash
          resultsContainer.innerHTML = '';
          
          searchTimeout = setTimeout(() => {
            // Haqiqiy API chaqiruvi
            fetch(`/api/search/?q=${encodeURIComponent(query)}`)
              .then(response => {
                if (!response.ok) {
                  throw new Error('Network response was not ok');
                }
                return response.json();
              })
              .then(data => {
                loadingSpinner.classList.remove('active');
                displaySearchResults(data, resultsContainer);
              })
              .catch(error => {
                console.error('Qidiruv xatosi:', error);
                loadingSpinner.classList.remove('active');
                resultsContainer.innerHTML = `
                  <div class="p-4 text-center text-red-500">
                    Qidiruvda xatolik yuz berdi. Iltimos, keyinroq qayta urinib ko'ring.
                  </div>
                `;
              });
          }, 500);
        }
        
        // Qidiruv natijalarini ko'rsatish
        function displaySearchResults(results, resultsContainer) {
          if (results.length === 0) {
            resultsContainer.innerHTML = `
              <div class="p-4 text-center text-gray-500">
                <i class="fas fa-search text-gray-300 text-2xl mb-2 block"></i>
                Hech narsa topilmadi
              </div>
            `;
            return;
          }
          
          let html = '';
          results.forEach(product => {
            html += `
              <div class="search-result-item" onclick="window.location.href='${product.url}'">
                <div class="search-result-image">
                  ${product.image ? 
                    `<img src="${product.image}" alt="${product.name}" onerror="this.style.display='none'">` : 
                    `<div class="w-full h-full bg-gray-100 flex items-center justify-center rounded-lg">
                      <i class="fas fa-image text-gray-400 text-lg"></i>
                    </div>`
                  }
                </div>
                <div class="search-result-content">
                  <div class="search-result-name">${product.name}</div>
                  <div class="search-result-price">${product.price}</div>
                  <div class="flex items-center gap-2 mt-1">
                    <span class="search-result-category">${product.category}</span>
                    <span class="search-result-location">
                      <i class="fas fa-map-marker-alt text-xs mr-1"></i>
                      ${product.location}
                    </span>
                  </div>
                </div>
              </div>
            `;
          });
          
          resultsContainer.innerHTML = html;
        }
        
        // Desktop qidiruv hodisalari
        desktopSearch.addEventListener('input', function(e) {
          const query = e.target.value.trim();
          performSearch(query, desktopResultsContainer, desktopLoadingSpinner, desktopSearchResults);
        });
        
        desktopSearch.addEventListener('focus', function() {
          if (this.value.trim() !== '') {
            desktopSearchResults.classList.add('active');
          }
        });
        
        // Enter bosilganda to'liq qidiruv sahifasiga o'tish
        desktopSearch.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') {
            const query = this.value.trim();
            if (query) {
              window.location.href = `/barcha-mahsulotlar/?q=${encodeURIComponent(query)}`;
            }
          }
        });
        
        // Tashqi bosilganda qidiruv natijalarini yashirish
        document.addEventListener('click', function(e) {
          if (!desktopSearch.contains(e.target) && !desktopSearchResults.contains(e.target)) {
            desktopSearchResults.classList.remove('active');
          }
        });
        
        // Mobile qidiruv tugmasi
        const mobileSearchBtn = document.getElementById('mobileSearchBtn');
        mobileSearchBtn.addEventListener('click', function() {
          desktopSearch.focus();
        });
        
        // Profil menyusi
        const profileButton = document.querySelector('.group');
        if (profileButton) {
          profileButton.addEventListener('mouseenter', function() {
            this.querySelector('button').classList.add('bg-gray-50');
          });
          
          profileButton.addEventListener('mouseleave', function() {
            this.querySelector('button').classList.remove('bg-gray-50');
          });
        }
        
        // Sevimlilar tugmasi funksiyasi
        const favoriteButtons = document.querySelectorAll('.product-favorite');
        favoriteButtons.forEach(button => {
          button.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            this.classList.toggle('active');
            const icon = this.querySelector('i');
            if (this.classList.contains('active')) {
              icon.className = 'ri-heart-fill';
            } else {
              icon.className = 'ri-heart-line';
            }
          });
        });
        
        // Mahsulot kartalariga bosilganda sahifaga o'tish
        const productCards = document.querySelectorAll('.product-card');
        productCards.forEach(card => {
          card.addEventListener('click', function() {
            // Bu yerda haqiqiy mahsulot sahifasiga yo'naltirish bo'lishi kerak
            // window.location.href = '/mahsulot/1/';
          });
        });
      });
    </script>
  </body>
</html>